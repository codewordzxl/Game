C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE GAME
OBJECT MODULE PLACED IN Game.OBJ
COMPILER INVOKED BY: D:\KEIL4 C51\C51\BIN\C51.EXE Game.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "Game.h"
   2          #include <stdlib.h>
   3          #include "stdio.h"
   4          
   5          extern flag;
   6          
   7          char txt[16];
   8          
   9          uint Player1_flag=0;//玩家1状态标志
  10          uint Player2_flag=0;//玩家2状态标志
  11          
  12          uint Player1_mark=0;//玩家1得分
  13          uint Player2_mark=0;//玩家2得分
  14          
  15          uint count=1;//游戏局数
  16          
  17          
  18          unsigned char code BMP1[] =
  19          {
  20          /*--  调入了一幅图像：D:\桌面\1.bmp  --*/
  21          /*--  宽度x高度=128x64  --*/
  22          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  23          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  28          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  31          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  32          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  33          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  34          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  36          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  37          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  38          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xF0,0x38,0x1C,0x0C,0x0E,
  39          0x06,0x0E,0x0C,0x1C,0x38,0xF0,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x70,0xF0,0xF0,
  40          0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x38,0xF8,0xF8,0x38,0x38,0x38,0x38,
  41          0x38,0x38,0x38,0x38,0x38,0x38,0x38,0x00,0xF0,0xF0,0x70,0x70,0x70,0x70,0x7C,0x7E,
  42          0x7C,0x70,0x70,0x70,0x70,0xF0,0xF0,0x00,0x00,0xE0,0xE0,0xF0,0xF8,0xF8,0x00,0x00,
  43          0x00,0x70,0xF0,0x70,0x70,0xFE,0xFE,0x70,0x70,0x70,0xFE,0xFE,0x70,0x70,0x70,0x70,
  44          0x70,0xF8,0xF8,0x18,0xF8,0xF8,0x00,0xF8,0xF8,0x80,0xFC,0xFC,0x80,0x80,0x80,0x80,
  45          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  46          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0xCE,0xCF,0x0E,0x00,
  47          0x00,0x00,0x00,0xCF,0xCE,0x00,0x83,0xFF,0x00,0xCC,0xFC,0xFC,0x70,0x70,0xFF,0xFF,
  48          0xFF,0xFE,0x70,0x70,0x70,0x70,0x70,0x30,0x1C,0x1C,0xFF,0xFF,0x1C,0x1C,0x0C,0xFC,
  49          0xFC,0x0C,0x0C,0xFC,0xFC,0x0C,0x0C,0x0C,0xC1,0xE1,0xE7,0x77,0xBF,0xFF,0xFF,0xFF,
  50          0xE7,0xE7,0xE7,0xF7,0x3F,0x3F,0x01,0x00,0x00,0x01,0x00,0xFF,0xFF,0xFF,0x00,0x00,
  51          0x20,0xE1,0x77,0xBF,0xFE,0xFF,0x37,0x30,0x30,0x30,0xFF,0xFF,0x33,0x37,0x3E,0x34,
  52          0x00,0xFF,0xFF,0xC6,0xFF,0xFF,0x1E,0xFF,0xE3,0xE1,0xFF,0xFF,0xE1,0xE1,0xE1,0xC1,
  53          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  54          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x0F,0x1C,0x39,0x77,0xEF,0xCE,
  55          0xCC,0xCC,0xCE,0x67,0x71,0x3C,0x0F,0x03,0x00,0x00,0x00,0x00,0x00,0x78,0x7F,0x3F,
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 2   

  56          0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x38,0x1F,0x1F,0xCE,0xEE,0xF8,0x7F,
  57          0x0F,0x00,0x00,0xFF,0xFF,0xE0,0xFC,0x7C,0xEC,0xEE,0xFF,0x77,0xFB,0xDD,0xCE,0xE7,
  58          0xFF,0x7F,0x03,0x0F,0x3E,0x7C,0x78,0x30,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x00,
  59          0x00,0x5C,0xDE,0xCF,0xE3,0xFF,0xFF,0xE0,0xF8,0x3F,0x0F,0x0F,0x3F,0xF8,0xF0,0xC0,
  60          0xC0,0xFF,0xFF,0xC1,0xFF,0xFF,0xE0,0xE0,0xE0,0xE0,0xFF,0xFF,0xE0,0xE0,0xE0,0xE0,
  61          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  62          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  63          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  64          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x00,0x00,
  65          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,
  66          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  67          0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,
  68          0x00,0x01,0x00,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  69          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  70          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  71          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  73          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  74          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  75          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  76          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  77          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  78          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  79          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  80          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  81          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  82          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  83          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  84          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  85          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  86          
  87          };
  88          
  89          unsigned char code BMP2[] =
  90          {
  91                  /*--  调入了一幅图像：D:\桌面\1.bmp  --*/
  92          /*--  宽度x高度=128x64  --*/
  93          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  94          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  95          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  96          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  97          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  98          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  99          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 100          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 101          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 102          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 103          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 104          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 105          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 106          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 107          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 108          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 109          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,
 110          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 111          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,
 112          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 113          0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x00,
 114          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,
 115          0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 116          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 117          0x00,0x00,0xC0,0xF8,0x3C,0x0E,0xE7,0xE3,0xC3,0x01,0x01,0x01,0x01,0xE3,0xE3,0xC6,
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 3   

 118          0x1E,0x7C,0xF0,0x00,0x86,0x86,0xFE,0xFE,0x86,0x86,0xC0,0xC6,0xC6,0xC6,0xC6,0xC6,
 119          0xC6,0xC6,0xC6,0xC6,0xC0,0x00,0x3C,0x3C,0x6C,0x6C,0x6C,0xEC,0xED,0xEF,0x6F,0x6F,
 120          0x6C,0x6C,0x6C,0xEC,0xFC,0x3C,0x3C,0x00,0x1C,0x0E,0x06,0x07,0x07,0x8E,0xFE,0xFC,
 121          0x78,0x0E,0x2E,0x7E,0xEE,0xCE,0xFF,0xFF,0x2E,0x0E,0x0E,0x0E,0xFF,0xFF,0x7F,0x6E,
 122          0xEE,0xCE,0x0E,0x00,0xFF,0xFF,0xE7,0xE7,0xFF,0xFF,0xF0,0xFF,0x3E,0x30,0xFF,0xFF,
 123          0xFF,0x30,0x30,0x30,0x30,0x00,0x80,0x80,0x80,0x00,0x0E,0xFE,0xFC,0xF8,0xE0,0x80,
 124          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 125          0x00,0x00,0x0F,0x3F,0xF0,0xC0,0x9C,0x3C,0x70,0x60,0x60,0x60,0x60,0x70,0x3C,0x8C,
 126          0xE0,0xF8,0x3F,0x03,0xC1,0xC1,0xFF,0xFF,0x61,0x71,0xF1,0xE1,0xFF,0x3F,0x01,0x01,
 127          0xFF,0xFF,0x01,0x81,0xE1,0xE4,0xEC,0x6E,0xFE,0xB7,0xFF,0xFF,0xEF,0x7F,0xFF,0xFC,
 128          0xEE,0x3E,0xFF,0xE7,0xC3,0x80,0x80,0x00,0xF0,0xF8,0xFC,0xDE,0xCF,0xC7,0xC3,0xC1,
 129          0xC0,0xC6,0xEE,0xF7,0x7B,0x3F,0xFF,0xFC,0x07,0x87,0xC7,0xF7,0xFF,0x7F,0xFF,0xC7,
 130          0x87,0x07,0x07,0x00,0xFF,0xFF,0x1C,0x1C,0xFF,0xFF,0x03,0x0F,0x0C,0x0C,0xFF,0xFF,
 131          0xFF,0x0C,0x0C,0x0C,0x00,0x00,0x0F,0x0F,0x07,0x07,0x87,0xFF,0xFF,0x7F,0x3F,0x0F,
 132          0x07,0x07,0x07,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 133          0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x03,0x07,0x06,0x06,0x06,0x06,0x07,0x03,0x01,
 134          0x01,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x0E,0x0F,0x07,0x03,0x01,0x00,0x00,0x00,
 135          0x07,0x07,0x06,0x07,0x07,0x03,0x07,0x07,0x03,0x03,0x07,0x07,0x06,0x06,0x07,0x07,
 136          0x01,0x00,0x00,0x01,0x01,0x03,0x03,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
 137          0x01,0x00,0x02,0x06,0x06,0x07,0x07,0x07,0x0F,0x07,0x03,0x01,0x00,0x00,0x01,0x03,
 138          0x07,0x0F,0x06,0x06,0x0F,0x07,0x06,0x06,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,
 139          0x07,0x07,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x01,0x00,0x00,0x00,
 140          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 141          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 142          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 143          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 144          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 145          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 146          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 147          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 148          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 149          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 150          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 151          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 152          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 153          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 154          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 155          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 156          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 157          
 158          };
 159          
 160          unsigned char xdata OLED_GRAM[101][8]={0};
 161          
 162          uint Time_Down=180;//贪吃蛇倒计时
 163          
 164          uchar x1;
 165          uchar y1;
 166          uchar x2;
 167          uchar y2;
 168          
 169          extern DisSnake_flag;
 170          
 171          //蛇的结构体
 172          struct Snake
 173          {
 174             uchar  x[30];
 175             uchar  y[30];
 176             uchar Node;                    //    蛇的节数
 177             uchar Direction;               //    蛇移动方向
 178          }Snake1;
 179          
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 4   

 180          struct snake
 181          {
 182             uchar  x[30];
 183             uchar  y[30];
 184             uchar Node;                    //    蛇的节数
 185             uchar Direction;               //    蛇移动方向
 186          }Snake2;
 187          
 188          
 189          //食物结构体
 190          struct Food
 191          {
 192             uchar x;                        //    食物的横坐标
 193             uchar y;                        //    食物的纵坐标
 194          }food;
 195          
 196          //
 197          uchar Snake1_Die=0;
 198          uchar Snake2_Die=0;
 199          
 200          struct Ball
 201          {
 202             uchar x;                        //    球的横坐标
 203             uchar y;                        //    球的纵坐标
 204          
 205             uchar x_D;
 206             uchar y_D;
 207          }ball;
 208          
 209          uchar D_x;//球的久坐标
 210          uchar D_y;
 211          
 212          uchar DisBoard_flag;
 213          
 214          void Game1()
 215          {       
 216   1              OLED_CLS();
 217   1      
 218   1              Player1_flag=0;//玩家1状态标志
 219   1              Player2_flag=0;//玩家2状态标志
 220   1      
 221   1              Player1_mark=0;//玩家1得分
 222   1              Player2_mark=0;//玩家2得分
 223   1      
 224   1              count=1;//游戏局数
 225   1      
 226   1              Led1=0;
 227   1              Led2=0;
 228   1      
 229   1              while(flag)
 230   1              {
 231   2                      Key();
 232   2                      Display();      
 233   2                      Result();
 234   2                      Mark();
 235   2      
 236   2                      if(Player1_mark==3)
 237   2                      {
 238   3                              flag=0;
 239   3      
 240   3                              OLED_CLS();
 241   3                              Draw_BMP(0,0,128,8,BMP1);
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 5   

 242   3      
 243   3                              Delay1ms(10000);
 244   3                      }
 245   2      
 246   2                      if(Player2_mark==3)
 247   2                      {
 248   3                              flag=0;
 249   3      
 250   3                              OLED_CLS();
 251   3                              Draw_BMP(0,0,128,8,BMP2);
 252   3      
 253   3                              Delay1ms(10000);
 254   3                      }
 255   2              }       
 256   1      }
 257          
 258          void Key()
 259          {
 260   1              //玩家1键盘
 261   1              if(Player1_U==0||Player1_L==0||Player1_D==0||Player1_R==0)
 262   1                      {
 263   2                              Delay1ms(100);
 264   2      
 265   2                         if(Player1_U==0)
 266   2                         {
 267   3                                      Player1_flag=2;
 268   3      
 269   3                                      Led1=1;
 270   3                         }
 271   2      
 272   2                         else if(Player1_L==0)
 273   2                         {
 274   3                                      Player1_flag=1;
 275   3      
 276   3                                      Led1=1;
 277   3                         }
 278   2      
 279   2                         else if(Player1_D==0)
 280   2                         {
 281   3                                      Player1_flag=rand()%3+1;
 282   3      
 283   3                                      Led1=1;
 284   3                         }
 285   2      
 286   2                         else if(Player1_R==0)
 287   2                         {
 288   3                                      Player1_flag=3;
 289   3      
 290   3                                      Led1=1;
 291   3                         }
 292   2                      }
 293   1      
 294   1                      if(Player2_U==0||Player2_L==0||Player2_D==0||Player2_R==0)
 295   1                      {
 296   2                              Delay1ms(100);
 297   2      
 298   2                         if(Player2_U==0)
 299   2                         {
 300   3                                      Player2_flag=2;
 301   3      
 302   3                                      Led2=1;
 303   3                         }
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 6   

 304   2      
 305   2                         else if(Player2_L==0)
 306   2                         {
 307   3                                      Player2_flag=1;
 308   3      
 309   3                                      Led2=1;
 310   3                         }
 311   2      
 312   2                         else if(Player2_D==0)
 313   2                         {
 314   3                                      Player2_flag=rand()%3+1;
 315   3      
 316   3                                      Led2=1;
 317   3                         }
 318   2      
 319   2                         else if(Player2_R==0)
 320   2                         {
 321   3                                      Player2_flag=3;
 322   3      
 323   3                                      Led2=1;
 324   3                         }
 325   2                      }
 326   1      
 327   1      }
 328          void Display()
 329          {
 330   1              //局数显示
 331   1               OLED_P16x16Ch(0,1,24);
 332   1      
 333   1               sprintf(txt,"%d",count);
 334   1           OLED_P8x16Str(16,1,(uchar *)txt);
 335   1      
 336   1               OLED_P16x16Ch(38,1,25);
 337   1               OLED_P16x16Ch(54,1,23);
 338   1      }
 339          
 340          void Mark()//得分：
 341          {
 342   1              OLED_P16x16Ch(0,6,21);
 343   1              OLED_P16x16Ch(16,6,22);
 344   1              OLED_P16x16Ch(31,6,23);
 345   1      
 346   1              sprintf(txt,"%d",Player1_mark);
 347   1          OLED_P8x16Str(63,6,(uchar *)txt);
 348   1      
 349   1              sprintf(txt,"%d",Player2_mark);
 350   1          OLED_P8x16Str(95,6,(uchar *)txt);
 351   1      }
 352          
 353          void Result()
 354          {
 355   1              if(Player1_flag!=0&&Player2_flag!=0)
 356   1              {
 357   2                      //玩家1图形
 358   2                       if(Player1_flag==1)
 359   2                       {
 360   3                                OLED_P16x16Ch(0,3,26);
 361   3                       }
 362   2              
 363   2                       if(Player1_flag==2)
 364   2                       {
 365   3                                OLED_P16x16Ch(0,3,27);
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 7   

 366   3                       }
 367   2                       if(Player1_flag==3)
 368   2                       {
 369   3                                 OLED_P16x16Ch(0,3,28);
 370   3                       }
 371   2              
 372   2                      //玩家2图形
 373   2                       if(Player2_flag==1)
 374   2                       {
 375   3                                      OLED_P16x16Ch(111,3,26);
 376   3                       }
 377   2              
 378   2                       if(Player2_flag==2)
 379   2                       {
 380   3                                      OLED_P16x16Ch(111,3,27);
 381   3                       }
 382   2                       if(Player2_flag==3)
 383   2                       {
 384   3                                       OLED_P16x16Ch(111,3,28);
 385   3                       }
 386   2      
 387   2      
 388   2                      if(Player1_flag==Player2_flag)//平局
 389   2                      {
 390   3                               OLED_P16x16Ch(31,3,31);
 391   3                               OLED_P16x16Ch(47,3,29);
 392   3                               OLED_P16x16Ch(63,3,25);
 393   3                               OLED_P16x16Ch(79,3,31);
 394   3      
 395   3                               Player1_flag=0;
 396   3                               Player2_flag=0;
 397   3      
 398   3                               Led1=0;
 399   3                               Led2=0;
 400   3      
 401   3                               count++;
 402   3      
 403   3                               Delay1ms(5000);
 404   3      
 405   3                      }
 406   2                      
 407   2                      else if((Player1_flag==1&&Player2_flag==2)||(Player1_flag==2&&Player2_flag==3)||(Player1_flag==3&&Player
             -2_flag==1))//玩家1胜利
 408   2                      {
 409   3                              OLED_P16x16Ch(31,3,8);
 410   3                              OLED_P16x16Ch(47,3,9);
 411   3                              OLED_P16x16Ch(63,3,10);
 412   3                              OLED_P16x16Ch(79,3,30);
 413   3      
 414   3                              Player1_flag=0;
 415   3                              Player2_flag=0;
 416   3      
 417   3                              Led1=0;
 418   3                              Led2=0;
 419   3      
 420   3                              count++;
 421   3                              Player1_mark++;
 422   3      
 423   3                              Delay1ms(5000);
 424   3                      }
 425   2      
 426   2                      else if((Player1_flag==1&&Player2_flag==3)||(Player1_flag==2&&Player2_flag==1)||(Player1_flag==3&&Player
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 8   

             -2_flag==2))//玩家2胜利
 427   2                      {
 428   3                              OLED_P16x16Ch(31,3,8);
 429   3                              OLED_P16x16Ch(47,3,9);
 430   3                              OLED_P16x16Ch(63,3,11);
 431   3                              OLED_P16x16Ch(79,3,30);
 432   3      
 433   3                              Player1_flag=0;
 434   3                              Player2_flag=0;
 435   3      
 436   3                              Led1=0;
 437   3                              Led2=0;
 438   3      
 439   3                              count++;
 440   3                              Player2_mark++;
 441   3      
 442   3                              Delay1ms(5000);
 443   3                      }
 444   2              }
 445   1              else
 446   1              {
 447   2                      OLED_P16x16Ch(0,3,32);
 448   2      
 449   2                      OLED_P16x16Ch(31,3,32);
 450   2                      OLED_P16x16Ch(47,3,32);
 451   2                      OLED_P16x16Ch(63,3,32);
 452   2                      OLED_P16x16Ch(79,3,32);
 453   2      
 454   2                      OLED_P16x16Ch(111,3,32);
 455   2              }
 456   1      }
 457          
 458          /***************************************************贪吃蛇************************************************
             -*******/
 459          void Game2()
 460          {
 461   1              Time_Down=180;
 462   1      
 463   1              Player1_mark=0;//玩家1得分
 464   1              Player2_mark=0;//玩家2得分
 465   1      
 466   1              Snake1_Die=0;
 467   1              Snake2_Die=0;
 468   1      
 469   1              Clear();
 470   1      
 471   1              OLED_CLS();
 472   1      
 473   1              Farme();
 474   1      
 475   1              Snake_Init();
 476   1      
 477   1              Make_Food();
 478   1      
 479   1              Display_Snake();
 480   1      
 481   1      
 482   1              OLED_Refresh_Gram();
 483   1      
 484   1              Time();
 485   1      
 486   1              Snake_Move();
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 9   

 487   1      
 488   1      
 489   1              TMOD=0x01;//T0工作于方式1
 490   1              TH0 = 0x0D8;
 491   1          TL0 = 0x0F0;
 492   1          EA = 1;
 493   1          ET0 = 1;
 494   1          TR0 = 1;
 495   1      
 496   1              while(flag)
 497   1              {
 498   2                      Key_Direct();
 499   2                      Die();
 500   2      
 501   2                      if(Snake1.x[0]==food.x&&Snake1.y[0]==food.y)
 502   2                      {
 503   3                         Snake1.Node++;
 504   3                         Player1_mark++;
 505   3                         Make_Food();
 506   3                      }
 507   2      
 508   2                      if(Snake2.x[0]==food.x&&Snake2.y[0]==food.y)
 509   2                      {
 510   3                         Snake2.Node++;
 511   3                         Player2_mark++;
 512   3                         Make_Food();
 513   3                      }
 514   2      
 515   2                      if(DisSnake_flag)
 516   2                      {
 517   3                              Time();
 518   3                              Farme();
 519   3                              Display_Snake();
 520   3                              OLED_Refresh_Gram();
 521   3                      } 
 522   2                      
 523   2                      if((Snake1_Die==0&&Snake2_Die==1)||Player1_mark==20)//玩家1获胜
 524   2                      {
 525   3                              flag=0;
 526   3      
 527   3                              ET0 = 0;
 528   3                      TR0 = 0;
 529   3      
 530   3                              OLED_CLS();
 531   3                              Draw_BMP(0,0,128,8,BMP1);
 532   3      
 533   3                              Delay1ms(10000);
 534   3                      } 
 535   2      
 536   2                      if((Snake1_Die==1&&Snake2_Die==0)||Player2_mark==20)//玩家2获胜
 537   2                      {
 538   3                              flag=0;
 539   3      
 540   3                              ET0 = 0;
 541   3                      TR0 = 0;
 542   3      
 543   3                              OLED_CLS();
 544   3                              Draw_BMP(0,0,128,8,BMP2);
 545   3      
 546   3                              Delay1ms(10000);
 547   3                      }
 548   2      
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 10  

 549   2                      if((Snake1_Die==1&&Snake2_Die==1)||Time_Down==0)//同时死亡
 550   2                      {
 551   3                              ET0 = 0;
 552   3                      TR0 = 0;
 553   3      
 554   3                              if(Player1_mark>Player2_mark)
 555   3                              {
 556   4                                      flag=0;
 557   4      
 558   4                                      OLED_CLS();
 559   4                                      Draw_BMP(0,0,128,8,BMP1);
 560   4                      
 561   4                                      Delay1ms(10000);
 562   4                              }
 563   3                              else if(Player1_mark<Player2_mark)
 564   3                              {
 565   4                                      flag=0;
 566   4      
 567   4                                      OLED_CLS();
 568   4                                      Draw_BMP(0,0,128,8,BMP2);
 569   4              
 570   4                                      Delay1ms(10000);
 571   4                              }
 572   3                              else
 573   3                              {
 574   4                                      flag=0;
 575   4                                      OLED_CLS();
 576   4                                      OLED_P16x16Ch(31,3,31);
 577   4                                      OLED_P16x16Ch(47,3,29);
 578   4                                      OLED_P16x16Ch(63,3,25);
 579   4                                      OLED_P16x16Ch(79,3,31);
 580   4                                      Delay1ms(10000);
 581   4                              }
 582   3                              
 583   3                      }
 584   2      
 585   2              }
 586   1      
 587   1              ET0 = 0;
 588   1          TR0 = 0;
 589   1      
 590   1      }
 591          
 592          void OLED_Refresh_Gram(void)
 593          {
 594   1          uchar i,n;
 595   1                       
 596   1          for(i=0;i<8;i++)  
 597   1          {  
 598   2                              OLED_Set_Pos(2,i);
 599   2                      
 600   2              for(n=0;n<101;n++)
 601   2                      {
 602   3                              OLED_WrDat(OLED_GRAM[n][i]);      //写数据
 603   3                      }
 604   2          }   
 605   1      }
 606          ///*************************************************************************/
 607          void OLED_DrawPoint(uchar x,uchar y,uchar t)
 608          {
 609   1          uchar pos,bx,temp=0;
 610   1          if(x>127||y>63)return;            //超出范围
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 11  

 611   1          pos=y/8;
 612   1          bx=y%8;
 613   1          temp=1<<(bx);
 614   1          if(t)OLED_GRAM[x][pos]|=temp;
 615   1          else OLED_GRAM[x][pos]&=~temp;     
 616   1      }
 617          
 618          //画线
 619          //x:0~128
 620          //y:0~64
 621          void OLED_DrawLine(uchar x1,uchar y1,uchar x2,uchar y2)
 622          {
 623   1              uchar i,k,k1,k2;
 624   1              if(x1==x2)    //画竖线
 625   1              {
 626   2                              for(i=0;i<(y2-y1);i++)
 627   2                              {
 628   3                                      OLED_DrawPoint(x1,y1+i,1);
 629   3                              }
 630   2        }
 631   1              else if(y1==y2)   //画横线
 632   1              {
 633   2                              for(i=0;i<(x2-x1);i++)
 634   2                              {
 635   3                                      OLED_DrawPoint(x1+i,y1,1);
 636   3                              }
 637   2        }
 638   1              else      //画斜线
 639   1              {
 640   2                      k1=y2-y1;
 641   2                      k2=x2-x1;
 642   2                      k=k1*10/k2;//斜率
 643   2                      for(i=0;i<(x2-x1);i++)
 644   2                              {
 645   3                                OLED_DrawPoint(x1+i,y1+i*k/10,1);
 646   3                              }
 647   2              }
 648   1      }
 649          
 650          void Farme()//边框显示
 651          {
 652   1              OLED_DrawLine(0,1,100,1);//上横
 653   1              OLED_DrawLine(0,63,100,63);//下横
 654   1              OLED_DrawLine(0,1,0,63);//左竖
 655   1              OLED_DrawLine(100,1,100,63);//右竖
 656   1      }
 657          
 658          void Time()//时间、得分显示
 659          {
 660   1              sprintf(txt,"%d",Time_Down);
 661   1          OLED_P8x16Str(104,0,(uchar *)txt);
 662   1              if(Time_Down<100)
 663   1              {
 664   2                      OLED_P8x16_Mie(120,0);
 665   2              }
 666   1              if(Time_Down<10)
 667   1              {
 668   2                      OLED_P8x16_Mie(112,0);
 669   2              }
 670   1      
 671   1              sprintf(txt,"%d",Player1_mark);
 672   1          OLED_P8x16Str(104,3,(uchar *)txt);
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 12  

 673   1      
 674   1              sprintf(txt,"%d",Player2_mark);
 675   1          OLED_P8x16Str(104,6,(uchar *)txt);
 676   1      
 677   1              if(Time_Down==0)//关闭定时器
 678   1              {
 679   2                      ET0 = 0;
 680   2              TR0 = 0;
 681   2              }
 682   1      }
 683          void Snake_Init()
 684          {
 685   1               Snake1.x[0]=10;
 686   1               Snake1.y[0]=20;
 687   1      
 688   1               Snake1.x[1]=9;
 689   1               Snake1.y[1]=20;
 690   1      
 691   1               Snake1.x[2]=8;
 692   1               Snake1.y[2]=20;
 693   1      
 694   1               Snake1.x[3]=7;
 695   1               Snake1.y[3]=20;
 696   1      
 697   1               Snake1.x[4]=6;
 698   1               Snake1.y[4]=20;
 699   1      
 700   1               Snake1.Node=5;
 701   1               Snake1.Direction=4;
 702   1      
 703   1               Snake2.x[0]=90;
 704   1               Snake2.y[0]=40;
 705   1      
 706   1               Snake2.x[1]=91;
 707   1               Snake2.y[1]=40;
 708   1      
 709   1               Snake2.x[2]=92;
 710   1               Snake2.y[2]=40;
 711   1      
 712   1               Snake2.x[3]=93;
 713   1               Snake2.y[3]=40;
 714   1      
 715   1               Snake2.x[4]=94;
 716   1               Snake2.y[4]=40;
 717   1      
 718   1               Snake2.Node=5;
 719   1               Snake2.Direction=2;
 720   1      }
 721          
 722          void Snake_Move()
 723          {
 724   1              uchar i;
 725   1              //1号蛇
 726   1              x1=Snake1.x[Snake1.Node-1];
 727   1              y1=Snake1.y[Snake1.Node-1];
 728   1      
 729   1              for(i=Snake1.Node-1;i>0;i--)
 730   1              {
 731   2                      Snake1.x[i]=Snake1.x[i-1];
 732   2                      Snake1.y[i]=Snake1.y[i-1];
 733   2              }
 734   1              if(Snake1.Direction==1)
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 13  

 735   1              {
 736   2                      Snake1.x[0]=Snake1.x[1];
 737   2                      Snake1.y[0]=Snake1.y[1]-1;
 738   2              }
 739   1              else if(Snake1.Direction==2)
 740   1              {
 741   2                      Snake1.x[0]=Snake1.x[1]-1;
 742   2                      Snake1.y[0]=Snake1.y[1];
 743   2              }
 744   1              else if(Snake1.Direction==3)
 745   1              {
 746   2                      Snake1.x[0]=Snake1.x[1];
 747   2                      Snake1.y[0]=Snake1.y[1]+1;
 748   2              }
 749   1              else if(Snake1.Direction==4)
 750   1              {
 751   2                      Snake1.x[0]=Snake1.x[1]+1;
 752   2                      Snake1.y[0]=Snake1.y[1];
 753   2              }
 754   1      
 755   1              //2号蛇
 756   1      
 757   1              x2=Snake2.x[Snake2.Node-1];
 758   1              y2=Snake2.y[Snake2.Node-1];
 759   1      
 760   1              for(i=Snake2.Node-1;i>0;i--)
 761   1              {
 762   2                      Snake2.x[i]=Snake2.x[i-1];
 763   2                      Snake2.y[i]=Snake2.y[i-1];
 764   2              }
 765   1              if(Snake2.Direction==1)
 766   1              {
 767   2                      Snake2.x[0]=Snake2.x[1];
 768   2                      Snake2.y[0]=Snake2.y[1]-1;
 769   2              }
 770   1              else if(Snake2.Direction==2)
 771   1              {
 772   2                      Snake2.x[0]=Snake2.x[1]-1;
 773   2                      Snake2.y[0]=Snake2.y[1];
 774   2              }
 775   1              else if(Snake2.Direction==3)
 776   1              {
 777   2                      Snake2.x[0]=Snake2.x[1];
 778   2                      Snake2.y[0]=Snake2.y[1]+1;
 779   2              }
 780   1              else if(Snake2.Direction==4)
 781   1              {
 782   2                      Snake2.x[0]=Snake2.x[1]+1;
 783   2                      Snake2.y[0]=Snake2.y[1];
 784   2              }
 785   1      
 786   1              DisSnake_flag=1;
 787   1      }
 788          
 789          void Display_Snake()
 790          {
 791   1                uchar i;
 792   1      
 793   1                OLED_DrawPoint(x1,y1,0);
 794   1                for(i=0;i<Snake1.Node;i++)
 795   1                {
 796   2                              OLED_DrawPoint(Snake1.x[i],Snake1.y[i],1);      
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 14  

 797   2                }
 798   1                
 799   1                OLED_DrawPoint(x2,y2,0);
 800   1                for(i=0;i<Snake2.Node;i++)
 801   1                {
 802   2                              OLED_DrawPoint(Snake2.x[i],Snake2.y[i],1);      
 803   2                }
 804   1                
 805   1                OLED_DrawPoint(food.x,food.y,1);
 806   1      
 807   1                DisSnake_flag=0;
 808   1                
 809   1      }
 810          
 811          void  Key_Direct()
 812          {
 813   1              //玩家1键盘
 814   1              if(Player1_U==0||Player1_L==0||Player1_D==0||Player1_R==0)
 815   1              {
 816   2                      Delay1ms(100);
 817   2      
 818   2                 if(Player1_U==0)
 819   2                 {
 820   3                              if(Snake1.Direction!=3)
 821   3                              {
 822   4                                      Snake1.Direction=1;
 823   4                              }
 824   3                 }
 825   2      
 826   2                 else if(Player1_L==0)
 827   2                 {
 828   3                              if(Snake1.Direction!=4)
 829   3                              {
 830   4                                      Snake1.Direction=2;
 831   4                              }
 832   3                 }
 833   2      
 834   2                 else if(Player1_D==0)
 835   2                 {
 836   3                              if(Snake1.Direction!=1)
 837   3                              {
 838   4                                      Snake1.Direction=3;
 839   4                              }
 840   3                 }
 841   2      
 842   2                 else if(Player1_R==0)
 843   2                 {
 844   3                              if(Snake1.Direction!=2)
 845   3                              {
 846   4                                      Snake1.Direction=4;
 847   4                              }
 848   3                 }
 849   2              }
 850   1      
 851   1              if(Player2_U==0||Player2_L==0||Player2_D==0||Player2_R==0)
 852   1              {
 853   2                      Delay1ms(100);
 854   2      
 855   2                 if(Player2_U==0)
 856   2                 {
 857   3                              if(Snake2.Direction!=3)
 858   3                              {
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 15  

 859   4                                      Snake2.Direction=1;
 860   4                              }
 861   3                 }
 862   2      
 863   2                 else if(Player2_L==0)
 864   2                 {
 865   3                              if(Snake2.Direction!=4)
 866   3                              {
 867   4                                      Snake2.Direction=2;
 868   4                              }
 869   3                 }
 870   2      
 871   2                 else if(Player2_D==0)
 872   2                 {
 873   3                              if(Snake2.Direction!=1)
 874   3                              {
 875   4                                      Snake2.Direction=3;
 876   4                              }
 877   3                 }
 878   2      
 879   2                 else if(Player2_R==0)
 880   2                 {
 881   3                              if(Snake2.Direction!=2)
 882   3                              {
 883   4                                      Snake2.Direction=4;
 884   4                              }
 885   3                 }
 886   2              }
 887   1      }
 888          
 889          void Make_Food()
 890          {
 891   1              uchar i,Node_Max;
 892   1              food.x=rand()%99+1;
 893   1              food.y=rand()%60+2;
 894   1      
 895   1              if(Snake1.Node>=Snake2.Node)
 896   1              {
 897   2                      Node_Max=Snake1.Node;
 898   2              }
 899   1              else
 900   1              {
 901   2                      Node_Max=Snake2.Node;
 902   2              }
 903   1              
 904   1              for(i=0;i<Node_Max;i++)
 905   1              {
 906   2                      if((Snake1.x[i]==food.x&&Snake1.y[i]==food.y)||(Snake2.x[i]==food.x&&Snake2.y[i]==food.y))
 907   2                      {
 908   3                              food.x=rand()%99+1;
 909   3                              food.y=rand()%60+2;
 910   3      
 911   3                              i=0;
 912   3                      }
 913   2              }
 914   1      
 915   1      }
 916          
 917          void Die()
 918          {
 919   1              uchar i;
 920   1              //****************撞墙*********************************************
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 16  

 921   1              if(Snake1.x[0]==0||Snake1.x[0]==100||Snake1.y[0]==1||Snake1.y[0]==63)
 922   1              {
 923   2                       Snake1_Die=1;
 924   2              }
 925   1      
 926   1              if(Snake2.x[0]==0||Snake2.x[0]==100||Snake2.y[0]==1||Snake2.y[0]==63)
 927   1              {
 928   2                       Snake2_Die=1;
 929   2              }
 930   1      
 931   1              //*****************咬蛇**********************************************
 932   1              //1号蛇
 933   1              for(i=1;i<Snake1.Node;i++)
 934   1              {
 935   2                      if(Snake1.x[0]==Snake1.x[i]&&Snake1.y[0]==Snake1.y[i])
 936   2                      {
 937   3                              Snake1_Die=1;
 938   3                      }
 939   2              }
 940   1      
 941   1              for(i=0;i<Snake2.Node;i++)
 942   1              {
 943   2                      if(Snake1.x[0]==Snake2.x[i]&&Snake1.y[0]==Snake2.y[i])
 944   2                      {
 945   3                              Snake1_Die=1;
 946   3                      }
 947   2              }
 948   1              
 949   1              //2号蛇
 950   1              for(i=1;i<Snake2.Node;i++)
 951   1              {
 952   2                      if(Snake2.x[0]==Snake2.x[i]&&Snake2.y[0]==Snake2.y[i])
 953   2                      {
 954   3                              Snake2_Die=1;
 955   3                      }
 956   2              }
 957   1      
 958   1              for(i=0;i<Snake1.Node;i++)
 959   1              {
 960   2                      if(Snake2.x[0]==Snake1.x[i]&&Snake2.y[0]==Snake1.y[i])
 961   2                      {
 962   3                              Snake2_Die=1;
 963   3                      }
 964   2              }
 965   1      
 966   1      }
 967          
 968          void Clear()//数组清空
 969          {
 970   1              uchar i,j;
 971   1      
 972   1              for(i=0;i<101;i++)
 973   1              {
 974   2                 for(j=0;j<64;j++)
 975   2                 {
 976   3                         OLED_DrawPoint(i,j,0);
 977   3                 }
 978   2              }
 979   1      
 980   1              for(i=0;i<30;i++)
 981   1              {
 982   2                      Snake1.x[i]=0;
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 17  

 983   2                      Snake1.y[i]=0;
 984   2                      Snake2.x[i]=0;
 985   2                      Snake2.y[i]=0;
 986   2              }
 987   1      }
 988          
 989          /********************************************************乒乓球*******************************************
             -********************/
 990          void Game3()
 991          {
 992   1              Clear();
 993   1      
 994   1              OLED_CLS();
 995   1      
 996   1              Farme();
 997   1      
 998   1              Board_Init();
 999   1      
1000   1              Display_Board();
1001   1      
1002   1              OLED_Refresh_Gram();
1003   1      
1004   1              TMOD=0x01;//T0工作于方式1
1005   1              TH0 = 0x0D8;
1006   1          TL0 = 0x0F0;
1007   1          EA = 1;
1008   1          ET0 = 1;
1009   1          TR0 = 1;
1010   1      
1011   1              while(flag)
1012   1              {
1013   2                      Key_Board();
1014   2      
1015   2                      if(DisBoard_flag)
1016   2                      {
1017   3                              Farme();
1018   3                              Display_Board();
1019   3                              OLED_Refresh_Gram();
1020   3                      }
1021   2      
1022   2                      if(ball.x==10)
1023   2                      {
1024   3                              flag=0;
1025   3      
1026   3                              ET0 = 0;
1027   3                      TR0 = 0;
1028   3      
1029   3                              OLED_CLS();
1030   3                              Draw_BMP(0,0,128,8,BMP2);
1031   3      
1032   3                              Delay1ms(10000);
1033   3                      }
1034   2      
1035   2                      if(ball.x==90)
1036   2                      {
1037   3                              flag=0;
1038   3      
1039   3                              ET0 = 0;
1040   3                      TR0 = 0;
1041   3      
1042   3                              OLED_CLS();
1043   3                              Draw_BMP(0,0,128,8,BMP1);
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 18  

1044   3      
1045   3                              Delay1ms(10000);
1046   3                      }
1047   2      
1048   2      
1049   2              }
1050   1      
1051   1              ET0 = 0;
1052   1          TR0 = 0;
1053   1      
1054   1      }
1055          
1056          void Board_Init()
1057          {
1058   1              Snake1.x[0]=10;
1059   1               Snake1.y[0]=27;
1060   1              
1061   1               Snake1.x[1]=10;
1062   1               Snake1.y[1]=28;
1063   1              
1064   1               Snake1.x[2]=10;
1065   1               Snake1.y[2]=29;
1066   1              
1067   1               Snake1.x[3]=10;
1068   1               Snake1.y[3]=30;
1069   1              
1070   1               Snake1.x[4]=10;
1071   1               Snake1.y[4]=31;
1072   1      
1073   1               Snake1.x[5]=10;
1074   1               Snake1.y[5]=32;
1075   1              
1076   1               Snake1.x[6]=10;
1077   1               Snake1.y[6]=33;
1078   1              
1079   1               Snake1.x[7]=10;
1080   1               Snake1.y[7]=34;
1081   1              
1082   1               Snake1.x[8]=10;
1083   1               Snake1.y[8]=35;
1084   1              
1085   1               Snake1.x[9]=10;
1086   1               Snake1.y[9]=36;
1087   1              
1088   1               Snake1.Node=10;
1089   1               Snake1.Direction=0;
1090   1              
1091   1               Snake2.x[0]=90;
1092   1               Snake2.y[0]=27;
1093   1              
1094   1               Snake2.x[1]=90;
1095   1               Snake2.y[1]=28;
1096   1              
1097   1               Snake2.x[2]=90;
1098   1               Snake2.y[2]=29;
1099   1              
1100   1               Snake2.x[3]=90;
1101   1               Snake2.y[3]=30;
1102   1              
1103   1               Snake2.x[4]=90;
1104   1               Snake2.y[4]=31;
1105   1      
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 19  

1106   1               Snake2.x[5]=90;
1107   1               Snake2.y[5]=32;
1108   1              
1109   1               Snake2.x[6]=90;
1110   1               Snake2.y[6]=33;
1111   1              
1112   1               Snake2.x[7]=90;
1113   1               Snake2.y[7]=34;
1114   1              
1115   1               Snake2.x[8]=90;
1116   1               Snake2.y[8]=35;
1117   1              
1118   1               Snake2.x[9]=90;
1119   1               Snake2.y[9]=36;
1120   1              
1121   1               Snake2.Node=10;
1122   1               Snake2.Direction=0;
1123   1      
1124   1               ball.x=12;
1125   1               ball.y=30;
1126   1               ball.x_D=1;
1127   1               ball.y_D=1;
1128   1      
1129   1      }
1130          
1131          void Display_Board()
1132          {
1133   1                uchar i;
1134   1      
1135   1                OLED_DrawPoint(x1,y1,0);
1136   1                for(i=0;i<Snake1.Node;i++)
1137   1                {
1138   2                              OLED_DrawPoint(Snake1.x[i],Snake1.y[i],1);      
1139   2                }
1140   1                
1141   1                OLED_DrawPoint(x2,y2,0);
1142   1                for(i=0;i<Snake2.Node;i++)
1143   1                {
1144   2                              OLED_DrawPoint(Snake2.x[i],Snake2.y[i],1);      
1145   2                }
1146   1      
1147   1                DisBoard_flag=0;
1148   1      
1149   1                OLED_DrawPoint(D_x,D_y,0);
1150   1      
1151   1                OLED_DrawPoint(ball.x,ball.y,1);
1152   1                
1153   1      }
1154          
1155          void Key_Board()
1156          {
1157   1              if(Player1_U==0)
1158   1              {
1159   2                      Snake1.Direction=5;//上
1160   2              }
1161   1              else if(Player1_D==0)
1162   1              {
1163   2                      Snake1.Direction=6;//下
1164   2              }
1165   1              else 
1166   1              {
1167   2                      Snake1.Direction=0;
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 20  

1168   2              }
1169   1      
1170   1              if(Player2_U==0)
1171   1              {
1172   2                      Snake2.Direction=5;//上
1173   2              }
1174   1              else if(Player2_D==0)
1175   1              {
1176   2                      Snake2.Direction=6;//下
1177   2              }
1178   1              else
1179   1              {
1180   2                      Snake2.Direction=0;
1181   2              }
1182   1      }
1183          
1184          void B_Move()
1185          {
1186   1              uchar i;
1187   1              if(DisBoard_flag==0)
1188   1              {
1189   2                      if(Snake1.Direction==5&&Snake1.y[0]!=2)
1190   2                      {
1191   3                              x1=Snake1.x[Snake1.Node-1];
1192   3                              y1=Snake1.y[Snake1.Node-1];
1193   3                      
1194   3                              for(i=Snake1.Node-1;i>0;i--)
1195   3                              {
1196   4                                      Snake1.x[i]=Snake1.x[i-1];
1197   4                                      Snake1.y[i]=Snake1.y[i-1];
1198   4                              }
1199   3              
1200   3                              Snake1.x[0]=Snake1.x[1];
1201   3                              Snake1.y[0]=Snake1.y[1]-1;
1202   3                      }
1203   2              
1204   2                      if(Snake1.Direction==6&&Snake1.y[Snake1.Node-1]!=62)
1205   2                      {
1206   3                              x1=Snake1.x[0];
1207   3                              y1=Snake1.y[0];
1208   3                      
1209   3                              for(i=0;i<Snake1.Node-1;i++)
1210   3                              {
1211   4                                      Snake1.x[i]=Snake1.x[i+1];
1212   4                                      Snake1.y[i]=Snake1.y[i+1];
1213   4                              }
1214   3              
1215   3                              Snake1.x[Snake1.Node-1]=Snake1.x[Snake1.Node-2];
1216   3                              Snake1.y[Snake1.Node-1]=Snake1.y[Snake1.Node-2]+1;
1217   3                      }
1218   2              
1219   2                      if(Snake2.Direction==5&&Snake2.y[0]!=2)
1220   2                      {
1221   3                              x2=Snake2.x[Snake2.Node-1];
1222   3                              y2=Snake2.y[Snake2.Node-1];
1223   3                      
1224   3                              for(i=Snake2.Node-1;i>0;i--)
1225   3                              {
1226   4                                      Snake2.x[i]=Snake2.x[i-1];
1227   4                                      Snake2.y[i]=Snake2.y[i-1];
1228   4                              }
1229   3              
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 21  

1230   3                              Snake2.x[0]=Snake2.x[1];
1231   3                              Snake2.y[0]=Snake2.y[1]-1;
1232   3                      }
1233   2              
1234   2                      if(Snake2.Direction==6&&Snake2.y[Snake2.Node-1]!=62)
1235   2                      {
1236   3                              x2=Snake2.x[0];
1237   3                              y2=Snake2.y[0];
1238   3                      
1239   3                              for(i=0;i<Snake2.Node-1;i++)
1240   3                              {
1241   4                                      Snake2.x[i]=Snake2.x[i+1];
1242   4                                      Snake2.y[i]=Snake2.y[i+1];
1243   4                              }
1244   3              
1245   3                              Snake2.x[Snake2.Node-1]=Snake2.x[Snake2.Node-2];
1246   3                              Snake2.y[Snake2.Node-1]=Snake2.y[Snake2.Node-2]+1;
1247   3                      }
1248   2      
1249   2                      D_x=ball.x;
1250   2                      D_y=ball.y;
1251   2              
1252   2                      if(ball.x_D==1)
1253   2                      {
1254   3                              ball.x+=1;
1255   3                      }
1256   2                      else
1257   2                      {
1258   3                              ball.x-=1;
1259   3                      }
1260   2              
1261   2                      if(ball.y_D==1)
1262   2                      {
1263   3                              ball.y+=1;
1264   3                      }
1265   2                      else
1266   2                      {
1267   3                              ball.y-=1;
1268   3                      }
1269   2      
1270   2                      if(ball.y==2)
1271   2                      {
1272   3                              ball.y_D=1;
1273   3                      }
1274   2      
1275   2                      if(ball.y==62)
1276   2                      {
1277   3                              ball.y_D=0;
1278   3                      }
1279   2      
1280   2                      if(ball.x==11)
1281   2                      {
1282   3                              for(i=0;i<Snake1.Node-1;i++)
1283   3                              {
1284   4                                 if(Snake1.y[i]==ball.y)
1285   4                                 {
1286   5                                        ball.x_D=1;
1287   5                                 }
1288   4                              }
1289   3                      }
1290   2      
1291   2                      if(ball.x==89)
C51 COMPILER V9.01   GAME                                                                  11/27/2020 00:05:50 PAGE 22  

1292   2                      {
1293   3                              for(i=0;i<Snake2.Node-1;i++)
1294   3                              {
1295   4                                 if(Snake2.y[i]==ball.y)
1296   4                                 {
1297   5                                        ball.x_D=0;
1298   5                                 }
1299   4                              }
1300   3                      }
1301   2              
1302   2                      DisBoard_flag=1;
1303   2              }
1304   1      
1305   1              
1306   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5317    ----
   CONSTANT SIZE    =   2051    ----
   XDATA SIZE       =    975      10
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
